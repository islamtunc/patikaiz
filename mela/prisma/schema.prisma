// Bismillahirrahmanirahim
// Elhamdullillahirabbulalemin
// Es-selatu vesselamu ala rasulina Muhammedin 
// Allah u Ekber, Allah u Ekber, Allah u Ekber, La ilahe illallah
// Bismillahirrahmanirahim
// Elhamdullillahirabbulalemin
// SuphanAllahi velhamdulillahi ve la ilahe illAllah u vAllah u Ekber 
// Allahu Ekber, Allahu Ekber, Allahu Ekber, La ilahe illallah
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model Mmmpeyam {
  id      Int    @id @default(autoincrement())
  name    String
  email   String
  message String
    createdAt DateTime @default(now())

  @@map("mmmpeyam")
}

// ---------------------------
// USER
// ---------------------------
model User {
  id           String    @id @default(cuid())
  username     String    @unique
  displayName  String
  email        String?   @unique
  passwordHash String?
  googleId     String?   @unique
  avatarUrl    String?
  bio          String?

  sessions Session[]
  bav      Bav[]
  dayik    Dayik[]
  stenbol  Stenbol[]
  reng     Reng[]
  mmselik  Mmselik[]
  diwar    Diwar[]
  diyari   Diyari[]
  hezkirin Hezkirin[]
  tn       Tn[]

  createdAt DateTime @default(now())

  @@map("users")
}

// ---------------------------
// SESSION
// ---------------------------
model Session {
  id        String   @id @default(cuid())
  userId    String
  expiresAt DateTime
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

// ---------------------------
// MEDIA
// ---------------------------
model Media {
  id        String      @id @default(cuid())
  type      MediaType
  url       String
  createdAt DateTime    @default(now())

  bavId       String?
  Bav         Bav? @relation(fields: [bavId], references: [id])





  maseId       String?
  Mase         Mase? @relation(fields: [maseId], references: [id])

  tnId       String?
  Tn          Tn? @relation(fields: [tnId], references: [id])
  dayikId     String?
  Dayik       Dayik? @relation(fields: [dayikId], references: [id])

  stenbolId   String?
  Stenbol     Stenbol? @relation(fields: [stenbolId], references: [id])

  rengId      String?
  Reng        Reng? @relation(fields: [rengId], references: [id])

  mmselikId   String?
  Mmselik     Mmselik? @relation(fields: [mmselikId], references: [id])

  diwarId     String?
  Diwar       Diwar? @relation(fields: [diwarId], references: [id])

  diyariId    String?
  Diyari      Diyari? @relation(fields: [diyariId], references: [id])


  hezkirinId    String?
  Hezkirin      Hezkirin? @relation(fields: [hezkirinId], references: [id])

  @@map("post_media")
}

enum MediaType {
  IMAGE
  VIDEO
}

// ---------------------------
// BAV
// ---------------------------
model Bav {
  id        String   @id @default(cuid())
  name      String
  createdAt DateTime @default(now())

  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)

  media     Media[]
  content   String[]
   @@map("bav")
}





model Mase {
  id        String   @id @default(cuid())
  name      String
  createdAt DateTime @default(now())

  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)

  media     Media[]
  content   String[]
   @@map("mase")
}



// ---------------------------
// Tn
// ---------------------------
model Tn {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  content   String[]
  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)
  name      String

  media     Media[]
   @@map("tn")
}


// ---------------------------
// DAYIK
// ---------------------------
model Dayik {
  id        String   @id @default(cuid())
  name      String
  createdAt DateTime @default(now())

  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)
  content   String[]
  media     Media[]



   @@map("dayik")
}

// ---------------------------
// STENBOL
// ---------------------------
model Stenbol {
  id        String   @id @default(cuid())
  name      String
  createdAt DateTime @default(now())

  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)

  media     Media[]
  content   String[]
   @@map("stenbol")
}

// ---------------------------
// RENG
// ---------------------------
model Reng {
  id        String   @id @default(cuid())
  color     String
  createdAt DateTime @default(now())
  name      String

  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)
  content   String[]
  media     Media[]

   @@map("reng")
}

// ---------------------------
// MMSelik
// ---------------------------
model Mmselik {
  id          String    @id @default(cuid())
  content     String[]
  userId      String
  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  attachments Media[]
  products    Product[]

  createdAt   DateTime  @default(now())
   @@map("mmselik")
}

// ---------------------------
// PRODUCT (Mmselik)
// ---------------------------
model Product {
  id         String   @id @default(cuid())
  name       String
  price      Float
  imageUrl   String?
  mmselikId  String
  mmselik    Mmselik  @relation(fields: [mmselikId], references: [id], onDelete: Cascade)

  createdAt  DateTime @default(now())

  @@map("products")
}

// ---------------------------
// DIWAR
// ---------------------------
model Diwar {
  id        String   @id @default(cuid())
  title     String
  content   String[]
  createdAt DateTime @default(now())

  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)

  media     Media[]



   @@map("diwar")
}

// ---------------------------
// DIYARI
// ---------------------------
model Diyari {
  id          String   @id @default(cuid())
  name        String
  description String?
  createdAt   DateTime @default(now())
  content   String[]
  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)

  media     Media[]
   @@map("diyari")
}

// ---------------------------
// HEZKIRIN
// ---------------------------
model Hezkirin {
  id        String   @id @default(cuid())
  userId    String
  user      User @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  content   String[]

  name      String

  // opposite relation for Media.hezkirinId
  media     Media[]

   @@map("hezkirin")
}


